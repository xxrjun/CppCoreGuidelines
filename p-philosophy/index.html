
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../in-introduction/">
      
      
        <link rel="next" href="../i-interfaces/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>P: Philosophy - C++ Core Guidelines</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#p-philosophy-s-philosophy" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="C++ Core Guidelines" class="md-header__button md-logo" aria-label="C++ Core Guidelines" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            C++ Core Guidelines
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              P: Philosophy
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/xxrjun/CppCoreGuidelines" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    xxrjun/CppCoreGuidelines
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="C++ Core Guidelines" class="md-nav__button md-logo" aria-label="C++ Core Guidelines" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    C++ Core Guidelines
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/xxrjun/CppCoreGuidelines" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    xxrjun/CppCoreGuidelines
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../NOTICE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NOTICE
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../abstract/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Abstract
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../in-introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    In: Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    P: Philosophy
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    P: Philosophy
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#p1-express-ideas-directly-in-code" class="md-nav__link">
    <span class="md-ellipsis">
      P.1: Express ideas directly in code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p2-write-in-iso-standard-c" class="md-nav__link">
    <span class="md-ellipsis">
      P.2: Write in ISO Standard C++
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p3-express-intent" class="md-nav__link">
    <span class="md-ellipsis">
      P.3: Express intent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p4-ideally-a-program-should-be-statically-type-safe" class="md-nav__link">
    <span class="md-ellipsis">
      P.4: Ideally, a program should be statically type safe
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p5-prefer-compile-time-checking-to-run-time-checking" class="md-nav__link">
    <span class="md-ellipsis">
      P.5: Prefer compile-time checking to run-time checking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p6-what-cannot-be-checked-at-compile-time-should-be-checkable-at-run-time" class="md-nav__link">
    <span class="md-ellipsis">
      P.6: What cannot be checked at compile time should be checkable at run time
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p7-catch-run-time-errors-early" class="md-nav__link">
    <span class="md-ellipsis">
      P.7: Catch run-time errors early
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p8-dont-leak-any-resources" class="md-nav__link">
    <span class="md-ellipsis">
      P.8: Don't leak any resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p9-dont-waste-time-or-space" class="md-nav__link">
    <span class="md-ellipsis">
      P.9: Don't waste time or space
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p10-prefer-immutable-data-to-mutable-data" class="md-nav__link">
    <span class="md-ellipsis">
      P.10: Prefer immutable data to mutable data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p11-encapsulate-messy-constructs-rather-than-spreading-through-the-code" class="md-nav__link">
    <span class="md-ellipsis">
      P.11: Encapsulate messy constructs, rather than spreading through the code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p12-use-supporting-tools-as-appropriate" class="md-nav__link">
    <span class="md-ellipsis">
      P.12: Use supporting tools as appropriate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p13-use-support-libraries-as-appropriate" class="md-nav__link">
    <span class="md-ellipsis">
      P.13: Use support libraries as appropriate
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../i-interfaces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    I: Interfaces
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../f-functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    F: Functions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../c-classes-and-class-hierarchies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C: Classes and class hierarchies
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../enum-enumerations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enum: Enumerations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../r-resource-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    R: Resource management
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../es-expressions-and-statements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ES: Expressions and statements
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../per-performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Per: Performance
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cp-concurrency-and-parallelism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CP: Concurrency and parallelism
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../e-error-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    E: Error handling
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../con-constants-and-immutability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Con: Constants and immutability
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../t-templates-and-generic-programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    T: Templates and generic programming
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cpl-c-style-programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CPL: C-style programming
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sf-source-files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SF: Source files
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sl-the-standard-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SL: The Standard Library
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../a-architectural-ideas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    A: Architectural ideas
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../nr-non-rules-and-myths/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NR: Non-Rules and myths
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../rf-references/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RF: References
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../pro-profiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pro: Profiles
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../gsl-guidelines-support-library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GSL: Guidelines support library
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../nl-naming-and-layout-suggestions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NL: Naming and layout suggestions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq-answers-to-frequently-asked-questions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ: Answers to frequently asked questions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix-a-libraries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Appendix A: Libraries
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix-b-modernizing-code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Appendix B: Modernizing code
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix-c-discussion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Appendix C: Discussion
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix-d-supporting-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Appendix D: Supporting tools
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../to-do-unclassified-proto-rules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    To-do: Unclassified proto-rules
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../bibliography/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bibliography
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#p1-express-ideas-directly-in-code" class="md-nav__link">
    <span class="md-ellipsis">
      P.1: Express ideas directly in code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p2-write-in-iso-standard-c" class="md-nav__link">
    <span class="md-ellipsis">
      P.2: Write in ISO Standard C++
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p3-express-intent" class="md-nav__link">
    <span class="md-ellipsis">
      P.3: Express intent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p4-ideally-a-program-should-be-statically-type-safe" class="md-nav__link">
    <span class="md-ellipsis">
      P.4: Ideally, a program should be statically type safe
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p5-prefer-compile-time-checking-to-run-time-checking" class="md-nav__link">
    <span class="md-ellipsis">
      P.5: Prefer compile-time checking to run-time checking
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p6-what-cannot-be-checked-at-compile-time-should-be-checkable-at-run-time" class="md-nav__link">
    <span class="md-ellipsis">
      P.6: What cannot be checked at compile time should be checkable at run time
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p7-catch-run-time-errors-early" class="md-nav__link">
    <span class="md-ellipsis">
      P.7: Catch run-time errors early
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p8-dont-leak-any-resources" class="md-nav__link">
    <span class="md-ellipsis">
      P.8: Don't leak any resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p9-dont-waste-time-or-space" class="md-nav__link">
    <span class="md-ellipsis">
      P.9: Don't waste time or space
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p10-prefer-immutable-data-to-mutable-data" class="md-nav__link">
    <span class="md-ellipsis">
      P.10: Prefer immutable data to mutable data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p11-encapsulate-messy-constructs-rather-than-spreading-through-the-code" class="md-nav__link">
    <span class="md-ellipsis">
      P.11: Encapsulate messy constructs, rather than spreading through the code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p12-use-supporting-tools-as-appropriate" class="md-nav__link">
    <span class="md-ellipsis">
      P.12: Use supporting tools as appropriate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#p13-use-support-libraries-as-appropriate" class="md-nav__link">
    <span class="md-ellipsis">
      P.13: Use support libraries as appropriate
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="p-philosophy-s-philosophy">P: Philosophy {#S-philosophy}<a class="headerlink" href="#p-philosophy-s-philosophy" title="Permanent link">&para;</a></h1>
<p>The rules in this section are very general.</p>
<p>Philosophy rules summary:</p>
<ul>
<li><a href="#Rp-direct">P.1: Express ideas directly in code</a></li>
<li><a href="#Rp-Cplusplus">P.2: Write in ISO Standard C++</a></li>
<li><a href="#Rp-what">P.3: Express intent</a></li>
<li><a href="#Rp-typesafe">P.4: Ideally, a program should be statically type safe</a></li>
<li><a href="#Rp-compile-time">P.5: Prefer compile-time checking to run-time checking</a></li>
<li><a href="#Rp-run-time">P.6: What cannot be checked at compile time should be checkable at run time</a></li>
<li><a href="#Rp-early">P.7: Catch run-time errors early</a></li>
<li><a href="#Rp-leak">P.8: Don't leak any resources</a></li>
<li><a href="#Rp-waste">P.9: Don't waste time or space</a></li>
<li><a href="#Rp-mutable">P.10: Prefer immutable data to mutable data</a></li>
<li><a href="#Rp-library">P.11: Encapsulate messy constructs, rather than spreading through the code</a></li>
<li><a href="#Rp-tools">P.12: Use supporting tools as appropriate</a></li>
<li><a href="#Rp-lib">P.13: Use support libraries as appropriate</a></li>
</ul>
<p>Philosophical rules are generally not mechanically checkable.
However, individual rules reflecting these philosophical themes are.
Without a philosophical basis, the more concrete/specific/checkable rules lack rationale.</p>
<h3 id="p1-express-ideas-directly-in-code"><a name="Rp-direct"></a>P.1: Express ideas directly in code<a class="headerlink" href="#p1-express-ideas-directly-in-code" title="Permanent link">&para;</a></h3>
<h5 id="reason">Reason<a class="headerlink" href="#reason" title="Permanent link">&para;</a></h5>
<p>Compilers don't read comments (or design documents) and neither do many programmers (consistently).
What is expressed in code has defined semantics and can (in principle) be checked by compilers and other tools.</p>
<h5 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>class Date {
public:
    Month month() const;  // do
    int month();          // don&#39;t
    // ...
};
</code></pre></div>
<p>The first declaration of <code>month</code> is explicit about returning a <code>Month</code> and about not modifying the state of the <code>Date</code> object.
The second version leaves the reader guessing and opens more possibilities for uncaught bugs.</p>
<h5 id="example-bad">Example, bad<a class="headerlink" href="#example-bad" title="Permanent link">&para;</a></h5>
<p>This loop is a restricted form of <code>std::find</code>:</p>
<div class="language-text highlight"><pre><span></span><code>void f(vector&lt;string&gt;&amp; v)
{
    string val;
    cin &gt;&gt; val;
    // ...
    int index = -1;                    // bad, plus should use gsl::index
    for (int i = 0; i &lt; v.size(); ++i) {
        if (v[i] == val) {
            index = i;
            break;
        }
    }
    // ...
}
</code></pre></div>
<h5 id="example-good">Example, good<a class="headerlink" href="#example-good" title="Permanent link">&para;</a></h5>
<p>A much clearer expression of intent would be:</p>
<div class="language-text highlight"><pre><span></span><code>void f(vector&lt;string&gt;&amp; v)
{
    string val;
    cin &gt;&gt; val;
    // ...
    auto p = find(begin(v), end(v), val);  // better
    // ...
}
</code></pre></div>
<p>A well-designed library expresses intent (what is to be done, rather than just how something is being done) far better than direct use of language features.</p>
<p>A C++ programmer should know the basics of the standard library, and use it where appropriate.
Any programmer should know the basics of the foundation libraries of the project being worked on, and use them appropriately.
Any programmer using these guidelines should know the <a href="#gsl-guidelines-support-library">guidelines support library</a>, and use it appropriately.</p>
<h5 id="example_1">Example<a class="headerlink" href="#example_1" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>change_speed(double s);   // bad: what does s signify?
// ...
change_speed(2.3);
</code></pre></div>
<p>A better approach is to be explicit about the meaning of the double (new speed or delta on old speed?) and the unit used:</p>
<div class="language-text highlight"><pre><span></span><code>change_speed(Speed s);    // better: the meaning of s is specified
// ...
change_speed(2.3);        // error: no unit
change_speed(23_m / 10s);  // meters per second
</code></pre></div>
<p>We could have accepted a plain (unit-less) <code>double</code> as a delta, but that would have been error-prone.
If we wanted both absolute speed and deltas, we would have defined a <code>Delta</code> type.</p>
<h5 id="enforcement">Enforcement<a class="headerlink" href="#enforcement" title="Permanent link">&para;</a></h5>
<p>Very hard in general.</p>
<ul>
<li>use <code>const</code> consistently (check if member functions modify their object; check if functions modify arguments passed by pointer or reference)</li>
<li>flag uses of casts (casts neuter the type system)</li>
<li>detect code that mimics the standard library (hard)</li>
</ul>
<h3 id="p2-write-in-iso-standard-c"><a name="Rp-Cplusplus"></a>P.2: Write in ISO Standard C++<a class="headerlink" href="#p2-write-in-iso-standard-c" title="Permanent link">&para;</a></h3>
<h5 id="reason_1">Reason<a class="headerlink" href="#reason_1" title="Permanent link">&para;</a></h5>
<p>This is a set of guidelines for writing ISO Standard C++.</p>
<h5 id="note">Note<a class="headerlink" href="#note" title="Permanent link">&para;</a></h5>
<p>There are environments where extensions are necessary, e.g., to access system resources.
In such cases, localize the use of necessary extensions and control their use with non-core Coding Guidelines.  If possible, build interfaces that encapsulate the extensions so they can be turned off or compiled away on systems that do not support those extensions.</p>
<p>Extensions often do not have rigorously defined semantics.  Even extensions that
are common and implemented by multiple compilers might have slightly different
behaviors and edge case behavior as a direct result of <em>not</em> having a rigorous
standard definition.  With sufficient use of any such extension, expected
portability will be impacted.</p>
<h5 id="note_1">Note<a class="headerlink" href="#note_1" title="Permanent link">&para;</a></h5>
<p>Using valid ISO C++ does not guarantee portability (let alone correctness).
Avoid dependence on undefined behavior (e.g., <a href="#Res-order">undefined order of evaluation</a>)
and be aware of constructs with implementation defined meaning (e.g., <code>sizeof(int)</code>).</p>
<h5 id="note_2">Note<a class="headerlink" href="#note_2" title="Permanent link">&para;</a></h5>
<p>There are environments where restrictions on use of standard C++ language or library features are necessary, e.g., to avoid dynamic memory allocation as required by aircraft control software standards.
In such cases, control their (dis)use with an extension of these Coding Guidelines customized to the specific environment.</p>
<h5 id="enforcement_1">Enforcement<a class="headerlink" href="#enforcement_1" title="Permanent link">&para;</a></h5>
<p>Use an up-to-date C++ compiler (currently C++20 or C++17) with a set of options that do not accept extensions.</p>
<h3 id="p3-express-intent"><a name="Rp-what"></a>P.3: Express intent<a class="headerlink" href="#p3-express-intent" title="Permanent link">&para;</a></h3>
<h5 id="reason_2">Reason<a class="headerlink" href="#reason_2" title="Permanent link">&para;</a></h5>
<p>Unless the intent of some code is stated (e.g., in names or comments), it is impossible to tell whether the code does what it is supposed to do.</p>
<h5 id="example_2">Example<a class="headerlink" href="#example_2" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>gsl::index i = 0;
while (i &lt; v.size()) {
    // ... do something with v[i] ...
}
</code></pre></div>
<p>The intent of "just" looping over the elements of <code>v</code> is not expressed here. The implementation detail of an index is exposed (so that it might be misused), and <code>i</code> outlives the scope of the loop, which might or might not be intended. The reader cannot know from just this section of code.</p>
<p>Better:</p>
<div class="language-text highlight"><pre><span></span><code>for (const auto&amp; x : v) { /* do something with the value of x */ }
</code></pre></div>
<p>Now, there is no explicit mention of the iteration mechanism, and the loop operates on a reference to <code>const</code> elements so that accidental modification cannot happen. If modification is desired, say so:</p>
<div class="language-text highlight"><pre><span></span><code>for (auto&amp; x : v) { /* modify x */ }
</code></pre></div>
<p>For more details about for-statements, see <a href="#Res-for-range">ES.71</a>.
Sometimes better still, use a named algorithm. This example uses the <code>for_each</code> from the Ranges TS because it directly expresses the intent:</p>
<div class="language-text highlight"><pre><span></span><code>for_each(v, [](int x) { /* do something with the value of x */ });
for_each(par, v, [](int x) { /* do something with the value of x */ });
</code></pre></div>
<p>The last variant makes it clear that we are not interested in the order in which the elements of <code>v</code> are handled.</p>
<p>A programmer should be familiar with</p>
<ul>
<li><a href="#gsl-guidelines-support-library">The guidelines support library</a></li>
<li><a href="#sl-the-standard-library">The ISO C++ Standard Library</a></li>
<li>Whatever foundation libraries are used for the current project(s)</li>
</ul>
<h5 id="note_3">Note<a class="headerlink" href="#note_3" title="Permanent link">&para;</a></h5>
<p>Alternative formulation: Say what should be done, rather than just how it should be done.</p>
<h5 id="note_4">Note<a class="headerlink" href="#note_4" title="Permanent link">&para;</a></h5>
<p>Some language constructs express intent better than others.</p>
<h5 id="example_3">Example<a class="headerlink" href="#example_3" title="Permanent link">&para;</a></h5>
<p>If two <code>int</code>s are meant to be the coordinates of a 2D point, say so:</p>
<div class="language-text highlight"><pre><span></span><code>draw_line(int, int, int, int);  // obscure: (x1,y1,x2,y2)? (x,y,h,w)? ...?
                                // need to look up documentation to know

draw_line(Point, Point);        // clearer
</code></pre></div>
<h5 id="enforcement_2">Enforcement<a class="headerlink" href="#enforcement_2" title="Permanent link">&para;</a></h5>
<p>Look for common patterns for which there are better alternatives</p>
<ul>
<li>simple <code>for</code> loops vs. range-<code>for</code> loops</li>
<li><code>f(T*, int)</code> interfaces vs. <code>f(span&lt;T&gt;)</code> interfaces</li>
<li>loop variables in too large a scope</li>
<li>naked <code>new</code> and <code>delete</code></li>
<li>functions with many parameters of built-in types</li>
</ul>
<p>There is a huge scope for cleverness and semi-automated program transformation.</p>
<h3 id="p4-ideally-a-program-should-be-statically-type-safe"><a name="Rp-typesafe"></a>P.4: Ideally, a program should be statically type safe<a class="headerlink" href="#p4-ideally-a-program-should-be-statically-type-safe" title="Permanent link">&para;</a></h3>
<h5 id="reason_3">Reason<a class="headerlink" href="#reason_3" title="Permanent link">&para;</a></h5>
<p>Ideally, a program would be completely statically (compile-time) type safe.
Unfortunately, that is not possible. Problem areas:</p>
<ul>
<li>unions</li>
<li>casts</li>
<li>array decay</li>
<li>range errors</li>
<li>narrowing conversions</li>
</ul>
<h5 id="note_5">Note<a class="headerlink" href="#note_5" title="Permanent link">&para;</a></h5>
<p>These areas are sources of serious problems (e.g., crashes and security violations).
We try to provide alternative techniques.</p>
<h5 id="enforcement_3">Enforcement<a class="headerlink" href="#enforcement_3" title="Permanent link">&para;</a></h5>
<p>We can ban, restrain, or detect the individual problem categories separately, as required and feasible for individual programs.
Always suggest an alternative.
For example:</p>
<ul>
<li>unions -- use <code>variant</code> (in C++17)</li>
<li>casts -- minimize their use; templates can help</li>
<li>array decay -- use <code>span</code> (from the GSL)</li>
<li>range errors -- use <code>span</code></li>
<li>narrowing conversions -- minimize their use and use <code>narrow</code> or <code>narrow_cast</code> (from the GSL) where they are necessary</li>
</ul>
<h3 id="p5-prefer-compile-time-checking-to-run-time-checking"><a name="Rp-compile-time"></a>P.5: Prefer compile-time checking to run-time checking<a class="headerlink" href="#p5-prefer-compile-time-checking-to-run-time-checking" title="Permanent link">&para;</a></h3>
<h5 id="reason_4">Reason<a class="headerlink" href="#reason_4" title="Permanent link">&para;</a></h5>
<p>Code clarity and performance.
You don't need to write error handlers for errors caught at compile time.</p>
<h5 id="example_4">Example<a class="headerlink" href="#example_4" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>// Int is an alias used for integers
int bits = 0;         // don&#39;t: avoidable code
for (Int i = 1; i; i &lt;&lt;= 1)
    ++bits;
if (bits &lt; 32)
    cerr &lt;&lt; &quot;Int too small\n&quot;;
</code></pre></div>
<p>This example fails to achieve what it is trying to achieve (because overflow is undefined) and should be replaced with a simple <code>static_assert</code>:</p>
<div class="language-text highlight"><pre><span></span><code>// Int is an alias used for integers
static_assert(sizeof(Int) &gt;= 4);    // do: compile-time check
</code></pre></div>
<p>Or better still just use the type system and replace <code>Int</code> with <code>int32_t</code>.</p>
<h5 id="example_5">Example<a class="headerlink" href="#example_5" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>void read(int* p, int n);   // read max n integers into *p

int a[100];
read(a, 1000);    // bad, off the end
</code></pre></div>
<p>better</p>
<div class="language-text highlight"><pre><span></span><code>void read(span&lt;int&gt; r); // read into the range of integers r

int a[100];
read(a);        // better: let the compiler figure out the number of elements
</code></pre></div>
<p><strong>Alternative formulation</strong>: Don't postpone to run time what can be done well at compile time.</p>
<h5 id="enforcement_4">Enforcement<a class="headerlink" href="#enforcement_4" title="Permanent link">&para;</a></h5>
<ul>
<li>Look for pointer arguments.</li>
<li>Look for run-time checks for range violations.</li>
</ul>
<h3 id="p6-what-cannot-be-checked-at-compile-time-should-be-checkable-at-run-time"><a name="Rp-run-time"></a>P.6: What cannot be checked at compile time should be checkable at run time<a class="headerlink" href="#p6-what-cannot-be-checked-at-compile-time-should-be-checkable-at-run-time" title="Permanent link">&para;</a></h3>
<h5 id="reason_5">Reason<a class="headerlink" href="#reason_5" title="Permanent link">&para;</a></h5>
<p>Leaving hard-to-detect errors in a program is asking for crashes and bad results.</p>
<h5 id="note_6">Note<a class="headerlink" href="#note_6" title="Permanent link">&para;</a></h5>
<p>Ideally, we catch all errors (that are not errors in the programmer's logic) at either compile time or run time. It is impossible to catch all errors at compile time and often not affordable to catch all remaining errors at run time. However, we should endeavor to write programs that in principle can be checked, given sufficient resources (analysis programs, run-time checks, machine resources, time).</p>
<h5 id="example-bad_1">Example, bad<a class="headerlink" href="#example-bad_1" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>// separately compiled, possibly dynamically loaded
extern void f(int* p);

void g(int n)
{
    // bad: the number of elements is not passed to f()
    f(new int[n]);
}
</code></pre></div>
<p>Here, a crucial bit of information (the number of elements) has been so thoroughly "obscured" that static analysis is probably rendered infeasible and dynamic checking can be very difficult when <code>f()</code> is part of an ABI so that we cannot "instrument" that pointer. We could embed helpful information into the free store, but that requires global changes to a system and maybe to the compiler. What we have here is a design that makes error detection very hard.</p>
<h5 id="example-bad_2">Example, bad<a class="headerlink" href="#example-bad_2" title="Permanent link">&para;</a></h5>
<p>We can of course pass the number of elements along with the pointer:</p>
<div class="language-text highlight"><pre><span></span><code>// separately compiled, possibly dynamically loaded
extern void f2(int* p, int n);

void g2(int n)
{
    f2(new int[n], m);  // bad: a wrong number of elements can be passed to f()
}
</code></pre></div>
<p>Passing the number of elements as an argument is better (and far more common) than just passing the pointer and relying on some (unstated) convention for knowing or discovering the number of elements. However (as shown), a simple typo can introduce a serious error. The connection between the two arguments of <code>f2()</code> is conventional, rather than explicit.</p>
<p>Also, it is implicit that <code>f2()</code> is supposed to <code>delete</code> its argument (or did the caller make a second mistake?).</p>
<h5 id="example-bad_3">Example, bad<a class="headerlink" href="#example-bad_3" title="Permanent link">&para;</a></h5>
<p>The standard library resource management pointers fail to pass the size when they point to an object:</p>
<div class="language-text highlight"><pre><span></span><code>// separately compiled, possibly dynamically loaded
// NB: this assumes the calling code is ABI-compatible, using a
// compatible C++ compiler and the same stdlib implementation
extern void f3(unique_ptr&lt;int[]&gt;, int n);

void g3(int n)
{
    f3(make_unique&lt;int[]&gt;(n), m);    // bad: pass ownership and size separately
}
</code></pre></div>
<h5 id="example_6">Example<a class="headerlink" href="#example_6" title="Permanent link">&para;</a></h5>
<p>We need to pass the pointer and the number of elements as an integral object:</p>
<div class="language-text highlight"><pre><span></span><code>extern void f4(vector&lt;int&gt;&amp;);   // separately compiled, possibly dynamically loaded
extern void f4(span&lt;int&gt;);      // separately compiled, possibly dynamically loaded
                                // NB: this assumes the calling code is ABI-compatible, using a
                                // compatible C++ compiler and the same stdlib implementation

void g3(int n)
{
    vector&lt;int&gt; v(n);
    f4(v);                     // pass a reference, retain ownership
    f4(span&lt;int&gt;{v});          // pass a view, retain ownership
}
</code></pre></div>
<p>This design carries the number of elements along as an integral part of an object, so that errors are unlikely and dynamic (run-time) checking is always feasible, if not always affordable.</p>
<h5 id="example_7">Example<a class="headerlink" href="#example_7" title="Permanent link">&para;</a></h5>
<p>How do we transfer both ownership and all information needed for validating use?</p>
<div class="language-text highlight"><pre><span></span><code>vector&lt;int&gt; f5(int n)    // OK: move
{
    vector&lt;int&gt; v(n);
    // ... initialize v ...
    return v;
}

unique_ptr&lt;int[]&gt; f6(int n)    // bad: loses n
{
    auto p = make_unique&lt;int[]&gt;(n);
    // ... initialize *p ...
    return p;
}

owner&lt;int*&gt; f7(int n)    // bad: loses n and we might forget to delete
{
    owner&lt;int*&gt; p = new int[n];
    // ... initialize *p ...
    return p;
}
</code></pre></div>
<h5 id="example_8">Example<a class="headerlink" href="#example_8" title="Permanent link">&para;</a></h5>
<ul>
<li>???</li>
<li>show how possible checks are avoided by interfaces that pass polymorphic base classes around, when they actually know what they need?
  Or strings as "free-style" options</li>
</ul>
<h5 id="enforcement_5">Enforcement<a class="headerlink" href="#enforcement_5" title="Permanent link">&para;</a></h5>
<ul>
<li>Flag (pointer, count)-style interfaces (this will flag a lot of examples that can't be fixed for compatibility reasons)</li>
<li>???</li>
</ul>
<h3 id="p7-catch-run-time-errors-early"><a name="Rp-early"></a>P.7: Catch run-time errors early<a class="headerlink" href="#p7-catch-run-time-errors-early" title="Permanent link">&para;</a></h3>
<h5 id="reason_6">Reason<a class="headerlink" href="#reason_6" title="Permanent link">&para;</a></h5>
<p>Avoid "mysterious" crashes.
Avoid errors leading to (possibly unrecognized) wrong results.</p>
<h5 id="example_9">Example<a class="headerlink" href="#example_9" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>void increment1(int* p, int n)    // bad: error-prone
{
    for (int i = 0; i &lt; n; ++i) ++p[i];
}

void use1(int m)
{
    const int n = 10;
    int a[n] = {};
    // ...
    increment1(a, m);   // maybe typo, maybe m &lt;= n is supposed
                        // but assume that m == 20
    // ...
}
</code></pre></div>
<p>Here we made a small error in <code>use1</code> that will lead to corrupted data or a crash.
The (pointer, count)-style interface leaves <code>increment1()</code> with no realistic way of defending itself against out-of-range errors.
If we could check subscripts for out of range access, then the error would not be discovered until <code>p[10]</code> was accessed.
We could check earlier and improve the code:</p>
<div class="language-text highlight"><pre><span></span><code>void increment2(span&lt;int&gt; p)
{
    for (int&amp; x : p) ++x;
}

void use2(int m)
{
    const int n = 10;
    int a[n] = {};
    // ...
    increment2({a, m});    // maybe typo, maybe m &lt;= n is supposed
    // ...
}
</code></pre></div>
<p>Now, <code>m &lt;= n</code> can be checked at the point of call (early) rather than later.
If all we had was a typo so that we meant to use <code>n</code> as the bound, the code could be further simplified (eliminating the possibility of an error):</p>
<div class="language-text highlight"><pre><span></span><code>void use3(int m)
{
    const int n = 10;
    int a[n] = {};
    // ...
    increment2(a);   // the number of elements of a need not be repeated
    // ...
}
</code></pre></div>
<h5 id="example-bad_4">Example, bad<a class="headerlink" href="#example-bad_4" title="Permanent link">&para;</a></h5>
<p>Don't repeatedly check the same value. Don't pass structured data as strings:</p>
<div class="language-text highlight"><pre><span></span><code>Date read_date(istream&amp; is);    // read date from istream

Date extract_date(const string&amp; s);    // extract date from string

void user1(const string&amp; date)    // manipulate date
{
    auto d = extract_date(date);
    // ...
}

void user2()
{
    Date d = read_date(cin);
    // ...
    user1(d.to_string());
    // ...
}
</code></pre></div>
<p>The date is validated twice (by the <code>Date</code> constructor) and passed as a character string (unstructured data).</p>
<h5 id="example_10">Example<a class="headerlink" href="#example_10" title="Permanent link">&para;</a></h5>
<p>Excess checking can be costly.
There are cases where checking early is inefficient because you might never need the value, or might only need part of the value that is more easily checked than the whole.  Similarly, don't add validity checks that change the asymptotic behavior of your interface (e.g., don't add a <code>O(n)</code> check to an interface with an average complexity of <code>O(1)</code>).</p>
<div class="language-text highlight"><pre><span></span><code>class Jet {    // Physics says: e * e &lt; x * x + y * y + z * z
    float x;
    float y;
    float z;
    float e;
public:
    Jet(float x, float y, float z, float e)
        :x(x), y(y), z(z), e(e)
    {
        // Should I check here that the values are physically meaningful?
    }

    float m() const
    {
        // Should I handle the degenerate case here?
        return sqrt(x * x + y * y + z * z - e * e);
    }

    ???
};
</code></pre></div>
<p>The physical law for a jet (<code>e * e &lt; x * x + y * y + z * z</code>) is not an invariant because of the possibility for measurement errors.</p>
<p>???</p>
<h5 id="enforcement_6">Enforcement<a class="headerlink" href="#enforcement_6" title="Permanent link">&para;</a></h5>
<ul>
<li>Look at pointers and arrays: Do range-checking early and not repeatedly</li>
<li>Look at conversions: Eliminate or mark narrowing conversions</li>
<li>Look for unchecked values coming from input</li>
<li>Look for structured data (objects of classes with invariants) being converted into strings</li>
<li>???</li>
</ul>
<h3 id="p8-dont-leak-any-resources"><a name="Rp-leak"></a>P.8: Don't leak any resources<a class="headerlink" href="#p8-dont-leak-any-resources" title="Permanent link">&para;</a></h3>
<h5 id="reason_7">Reason<a class="headerlink" href="#reason_7" title="Permanent link">&para;</a></h5>
<p>Even a slow growth in resources will, over time, exhaust the availability of those resources.
This is particularly important for long-running programs, but is an essential piece of responsible programming behavior.</p>
<h5 id="example-bad_5">Example, bad<a class="headerlink" href="#example-bad_5" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>void f(char* name)
{
    FILE* input = fopen(name, &quot;r&quot;);
    // ...
    if (something) return;   // bad: if something == true, a file handle is leaked
    // ...
    fclose(input);
}
</code></pre></div>
<p>Prefer <a href="#Rr-raii">RAII</a>:</p>
<div class="language-text highlight"><pre><span></span><code>void f(char* name)
{
    ifstream input {name};
    // ...
    if (something) return;   // OK: no leak
    // ...
}
</code></pre></div>
<p><strong>See also</strong>: <a href="#S-resource">The resource management section</a></p>
<h5 id="note_7">Note<a class="headerlink" href="#note_7" title="Permanent link">&para;</a></h5>
<p>A leak is colloquially "anything that isn't cleaned up."
The more important classification is "anything that can no longer be cleaned up."
For example, allocating an object on the heap and then losing the last pointer that points to that allocation.
This rule should not be taken as requiring that allocations within long-lived objects must be returned during program shutdown.
For example, relying on system guaranteed cleanup such as file closing and memory deallocation upon process shutdown can simplify code.
However, relying on abstractions that implicitly clean up can be as simple, and often safer.</p>
<h5 id="note_8">Note<a class="headerlink" href="#note_8" title="Permanent link">&para;</a></h5>
<p>Enforcing <a href="#SS-lifetime">the lifetime safety profile</a> eliminates leaks.
When combined with resource safety provided by <a href="#Rr-raii">RAII</a>, it eliminates the need for "garbage collection" (by generating no garbage).
Combine this with enforcement of <a href="#SS-force">the type and bounds profiles</a> and you get complete type- and resource-safety, guaranteed by tools.</p>
<h5 id="enforcement_7">Enforcement<a class="headerlink" href="#enforcement_7" title="Permanent link">&para;</a></h5>
<ul>
<li>Look at pointers: Classify them into non-owners (the default) and owners.
  Where feasible, replace owners with standard-library resource handles (as in the example above).
  Alternatively, mark an owner as such using <code>owner</code> from <a href="#gsl-guidelines-support-library">the GSL</a>.</li>
<li>Look for naked <code>new</code> and <code>delete</code></li>
<li>Look for known resource allocating functions returning raw pointers (such as <code>fopen</code>, <code>malloc</code>, and <code>strdup</code>)</li>
</ul>
<h3 id="p9-dont-waste-time-or-space"><a name="Rp-waste"></a>P.9: Don't waste time or space<a class="headerlink" href="#p9-dont-waste-time-or-space" title="Permanent link">&para;</a></h3>
<h5 id="reason_8">Reason<a class="headerlink" href="#reason_8" title="Permanent link">&para;</a></h5>
<p>This is C++.</p>
<h5 id="note_9">Note<a class="headerlink" href="#note_9" title="Permanent link">&para;</a></h5>
<p>Time and space that you spend well to achieve a goal (e.g., speed of development, resource safety, or simplification of testing) is not wasted.
"Another benefit of striving for efficiency is that the process forces you to understand the problem in more depth." - Alex Stepanov</p>
<h5 id="example-bad_6">Example, bad<a class="headerlink" href="#example-bad_6" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>struct X {
    char ch;
    int i;
    string s;
    char ch2;

    X&amp; operator=(const X&amp; a);
    X(const X&amp;);
};

X waste(const char* p)
{
    if (!p) throw Nullptr_error{};
    int n = strlen(p);
    auto buf = new char[n];
    if (!buf) throw Allocation_error{};
    for (int i = 0; i &lt; n; ++i) buf[i] = p[i];
    // ... manipulate buffer ...
    X x;
    x.ch = &#39;a&#39;;
    x.s = string(n);    // give x.s space for *p
    for (gsl::index i = 0; i &lt; x.s.size(); ++i) x.s[i] = buf[i];  // copy buf into x.s
    delete[] buf;
    return x;
}

void driver()
{
    X x = waste(&quot;Typical argument&quot;);
    // ...
}
</code></pre></div>
<p>Yes, this is a caricature, but we have seen every individual mistake in production code, and worse.
Note that the layout of <code>X</code> guarantees that at least 6 bytes (and most likely more) are wasted.
The spurious definition of copy operations disables move semantics so that the return operation is slow
(please note that the Return Value Optimization, RVO, is not guaranteed here).
The use of <code>new</code> and <code>delete</code> for <code>buf</code> is redundant; if we really needed a local string, we should use a local <code>string</code>.
There are several more performance bugs and gratuitous complication.</p>
<h5 id="example-bad_7">Example, bad<a class="headerlink" href="#example-bad_7" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>void lower(zstring s)
{
    for (int i = 0; i &lt; strlen(s); ++i) s[i] = tolower(s[i]);
}
</code></pre></div>
<p>This is actually an example from production code.
We can see that in our condition we have <code>i &lt; strlen(s)</code>. This expression will be evaluated on every iteration of the loop, which means that <code>strlen</code> must walk through string every loop to discover its length. While the string contents are changing, it's assumed that <code>tolower</code> will not affect the length of the string, so it's better to cache the length outside the loop and not incur that cost each iteration.</p>
<h5 id="note_10">Note<a class="headerlink" href="#note_10" title="Permanent link">&para;</a></h5>
<p>An individual example of waste is rarely significant, and where it is significant, it is typically easily eliminated by an expert.
However, waste spread liberally across a code base can easily be significant and experts are not always as available as we would like.
The aim of this rule (and the more specific rules that support it) is to eliminate most waste related to the use of C++ before it happens.
After that, we can look at waste related to algorithms and requirements, but that is beyond the scope of these guidelines.</p>
<h5 id="enforcement_8">Enforcement<a class="headerlink" href="#enforcement_8" title="Permanent link">&para;</a></h5>
<p>Many more specific rules aim at the overall goals of simplicity and elimination of gratuitous waste.</p>
<ul>
<li>Flag an unused return value from a user-defined non-defaulted postfix <code>operator++</code> or <code>operator--</code> function. Prefer using the prefix form instead. (Note: "User-defined non-defaulted" is intended to reduce noise. Review this enforcement if it's still too noisy in practice.)</li>
</ul>
<h3 id="p10-prefer-immutable-data-to-mutable-data"><a name="Rp-mutable"></a>P.10: Prefer immutable data to mutable data<a class="headerlink" href="#p10-prefer-immutable-data-to-mutable-data" title="Permanent link">&para;</a></h3>
<h5 id="reason_9">Reason<a class="headerlink" href="#reason_9" title="Permanent link">&para;</a></h5>
<p>It is easier to reason about constants than about variables.
Something immutable cannot change unexpectedly.
Sometimes immutability enables better optimization.
You can't have a data race on a constant.</p>
<p>See <a href="#S-const">Con: Constants and immutability</a></p>
<h3 id="p11-encapsulate-messy-constructs-rather-than-spreading-through-the-code"><a name="Rp-library"></a>P.11: Encapsulate messy constructs, rather than spreading through the code<a class="headerlink" href="#p11-encapsulate-messy-constructs-rather-than-spreading-through-the-code" title="Permanent link">&para;</a></h3>
<h5 id="reason_10">Reason<a class="headerlink" href="#reason_10" title="Permanent link">&para;</a></h5>
<p>Messy code is more likely to hide bugs and harder to write.
A good interface is easier and safer to use.
Messy, low-level code breeds more such code.</p>
<h5 id="example_11">Example<a class="headerlink" href="#example_11" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>int sz = 100;
int* p = (int*) malloc(sizeof(int) * sz);
int count = 0;
// ...
for (;;) {
    // ... read an int into x, exit loop if end of file is reached ...
    // ... check that x is valid ...
    if (count == sz)
        p = (int*) realloc(p, sizeof(int) * sz * 2);
    p[count++] = x;
    // ...
}
</code></pre></div>
<p>This is low-level, verbose, and error-prone.
For example, we "forgot" to test for memory exhaustion and assign new value to <code>sz</code>.
Instead, we could use <code>vector</code>:</p>
<div class="language-text highlight"><pre><span></span><code>vector&lt;int&gt; v;
v.reserve(100);
// ...
for (int x; cin &gt;&gt; x; ) {
    // ... check that x is valid ...
    v.push_back(x);
}
</code></pre></div>
<h5 id="note_11">Note<a class="headerlink" href="#note_11" title="Permanent link">&para;</a></h5>
<p>The standards library and the GSL are examples of this philosophy.
For example, instead of messing with the arrays, unions, cast, tricky lifetime issues, <code>gsl::owner</code>, etc.,
that are needed to implement key abstractions, such as <code>vector</code>, <code>span</code>, <code>lock_guard</code>, and <code>future</code>, we use the libraries
designed and implemented by people with more time and expertise than we usually have.
Similarly, we can and should design and implement more specialized libraries, rather than leaving the users (often ourselves)
with the challenge of repeatedly getting low-level code well.
This is a variant of the <a href="#R0">subset of superset principle</a> that underlies these guidelines.</p>
<h5 id="enforcement_9">Enforcement<a class="headerlink" href="#enforcement_9" title="Permanent link">&para;</a></h5>
<ul>
<li>Look for "messy code" such as complex pointer manipulation and casting outside the implementation of abstractions.</li>
</ul>
<h3 id="p12-use-supporting-tools-as-appropriate"><a name="Rp-tools"></a>P.12: Use supporting tools as appropriate<a class="headerlink" href="#p12-use-supporting-tools-as-appropriate" title="Permanent link">&para;</a></h3>
<h5 id="reason_11">Reason<a class="headerlink" href="#reason_11" title="Permanent link">&para;</a></h5>
<p>There are many things that are done better "by machine".
Computers don't tire or get bored by repetitive tasks.
We typically have better things to do than repeatedly do routine tasks.</p>
<h5 id="example_12">Example<a class="headerlink" href="#example_12" title="Permanent link">&para;</a></h5>
<p>Run a static analyzer to verify that your code follows the guidelines you want it to follow.</p>
<h5 id="note_12">Note<a class="headerlink" href="#note_12" title="Permanent link">&para;</a></h5>
<p>See</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis">Static analysis tools</a></li>
<li><a href="#Rconc-tools">Concurrency tools</a></li>
<li><a href="https://github.com/isocpp/CppCoreGuidelines/tree/master">Testing tools</a></li>
</ul>
<p>There are many other kinds of tools, such as source code repositories, build tools, etc.,
but those are beyond the scope of these guidelines.</p>
<h5 id="note_13">Note<a class="headerlink" href="#note_13" title="Permanent link">&para;</a></h5>
<p>Be careful not to become dependent on over-elaborate or over-specialized tool chains.
Those can make your otherwise portable code non-portable.</p>
<h3 id="p13-use-support-libraries-as-appropriate"><a name="Rp-lib"></a>P.13: Use support libraries as appropriate<a class="headerlink" href="#p13-use-support-libraries-as-appropriate" title="Permanent link">&para;</a></h3>
<h5 id="reason_12">Reason<a class="headerlink" href="#reason_12" title="Permanent link">&para;</a></h5>
<p>Using a well-designed, well-documented, and well-supported library saves time and effort;
its quality and documentation are likely to be greater than what you could do
if the majority of your time must be spent on an implementation.
The cost (time, effort, money, etc.) of a library can be shared over many users.
A widely used library is more likely to be kept up-to-date and ported to new systems than an individual application.
Knowledge of a widely-used library can save time on other/future projects.
So, if a suitable library exists for your application domain, use it.</p>
<h5 id="example_13">Example<a class="headerlink" href="#example_13" title="Permanent link">&para;</a></h5>
<div class="language-text highlight"><pre><span></span><code>std::sort(begin(v), end(v), std::greater&lt;&gt;());
</code></pre></div>
<p>Unless you are an expert in sorting algorithms and have plenty of time,
this is more likely to be correct and to run faster than anything you write for a specific application.
You need a reason not to use the standard library (or whatever foundational libraries your application uses) rather than a reason to use it.</p>
<h5 id="note_14">Note<a class="headerlink" href="#note_14" title="Permanent link">&para;</a></h5>
<p>By default use</p>
<ul>
<li>The <a href="#sl-the-standard-library">ISO C++ Standard Library</a></li>
<li>The <a href="#gsl-guidelines-support-library">Guidelines Support Library</a></li>
</ul>
<h5 id="note_15">Note<a class="headerlink" href="#note_15" title="Permanent link">&para;</a></h5>
<p>If no well-designed, well-documented, and well-supported library exists for an important domain,
maybe you should design and implement it, and then use it.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>